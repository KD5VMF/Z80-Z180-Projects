10 REM === PRIME + GAP TABLE (MBASIC-80) ===
20 PRINT "Prime/gap table to L. Writes PRIMEGAP.TXT"
30 INPUT "L (upper limit)"; LIM
40 IF LIM<2 THEN PRINT "Nothing to do.": END
50 OPEN "O",1,"PRIMEGAP.TXT"
60 PRINT #1,"prime,gap_from_prev,running_max_gap"
70 PREV=0: MAXG=0
80 FOR N=2 TO LIM
90   IF N>2 AND N-2*INT(N/2)=0 THEN 170
100  S=INT(SQR(N))
110  IF N=2 THEN GOTO 150
120  D=3
130  IF D>S THEN 150
140  IF N-INT(N/D)*D=0 THEN 170 ELSE D=D+2: GOTO 130
150  IF PREV=0 THEN GAP=0 ELSE GAP=N-PREV
160  IF GAP>MAXG THEN MAXG=GAP
165  PRINT #1, N;",";GAP;",";MAXG
166  IF N-INT(N/500)*500=0 THEN PRINT "Prime";N;"  Gap=";GAP;"  MaxGap=";MAXG
167  PREV=N
170 NEXT N
180 CLOSE 1
190 PRINT "Finished. File: PRIMEGAP.TXT"
200 END
